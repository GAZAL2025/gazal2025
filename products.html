<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>ุงูููุชุฌุงุช</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css" />
   <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>
  <header class="center-content">
    <a href="#" id="navbar__logo"><img src="Y.G.jpg" alt="ุดุนุงุฑ ุงูุดุฑูุฉ"></a>
    <h1 class="site-titel">ููุชุฌุงุชูุง</h1>
    <nav class="navbar">
      <div class="navbar__container">
        <div class="navbar__toggle" id="mobile-menu">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </div>
        <ul class="navbar__menu">
          <li class="navbar_item"><a href="index.html" class="navbar_links">ุงูุฑุฆูุณูุฉ</a></li>
          <li class="navbar_item"><a href="products.html" class="navbar_links">ุงูููุชุฌุงุช</a></li>
          <li class="navbar_item"><a href="about.html" class="navbar_links">ูู ูุญู</a></li>
          <li class="navbar_item"><a href="cart.html" class="navbar_links">ุงูุณูุฉ</a></li>
          <li class="navbar_item"><a href="contact.html" class="navbar_links">ุงุชุตู ุจูุง</a></li>
          <li class="navbar_item"><a href="event.html" class="navbar_links">ุงูุญุฏุซ</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main class="center-content">
    <h2>ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h2>
    <form id="productForm">
    <label for="productName">ุงุณู ุงูููุชุฌ:</label>
    <input type="text" id="productName" required placeholder="ุฃุฏุฎู ุงุณู ุงูููุชุฌ" />

    <label for="productPrice">ุงูุณุนุฑ (ุฑูุงู):</label>
    <input type="number" id="productPrice" required min="0" step="0.01" placeholder="ุฃุฏุฎู ุณุนุฑ ุงูููุชุฌ" />

    <label for="productImage">ุตูุฑุฉ ุงูููุชุฌ:</label>
    <input type="file" id="productImage" accept="image/*" required />

    <button type="submit">ุฅุถุงูุฉ ุงูููุชุฌ</button>
  </form>

    <h2>ุงูููุชุฌุงุช ุงููุชููุฑุฉ</h2>
    <div id="productList"></div>
  </main>

  <footer>
    <p>&copy; ุบุฒูู</p>
  </footer>
<script type="module">
  alert("ุงูุฌุงูุงุณูุฑุจุช ูุง ูุนูู โ");
 <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      getDocs,
      addDoc,
      deleteDoc,
      doc
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    // ุฅุนุฏุงุฏ Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD7H0KEqtBx4TFQX80jFbYbnoiN8HBOUD0",
      authDomain: "ghazal-2025.firebaseapp.com",
      projectId: "ghazal-2025",
      storageBucket: "ghazal-2025.appspot.com",
      messagingSenderId: "991237133972",
      appId: "1:991237133972:web:ee881d54f94e7d20690681"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const productsRef = collection(db, "products");

    // ุฅุถุงูุฉ ููุชุฌ ุฅูู Firestore
    async function addProduct(name, price, imageBase64) {
      await addDoc(productsRef, {
        name,
        price,
        image: imageBase64
      });
    }

    // ุนุฑุถ ุงูููุชุฌุงุช ูู Firestore
    async function displayProducts() {
      const productList = document.getElementById("productList");
      productList.innerHTML = "";

      const snapshot = await getDocs(productsRef);
      snapshot.forEach(docSnap => {
        const data = docSnap.data();
        const card = document.createElement("div");
        card.className = "product-card";
        card.innerHTML = `
          <img src="${data.image || 'default-image.png'}" alt="${data.name}" class="product-img" />
          <h3>${data.name}</h3>
          <p>ุงูุณุนุฑ: ${data.price} ุฑูุงู</p>
          <button class="delete-btn" data-id="${docSnap.id}">๐ ุญุฐู</button>
          <button class="cart-btn" data-id="${docSnap.id}">๐ ุฃุถู ููุณูุฉ</button>
        `;
        productList.appendChild(card);
      });

      // ุชูุนูู ุฃุฒุฑุงุฑ ุงูุญุฐู
      document.querySelectorAll(".delete-btn").forEach(button => {
        button.addEventListener("click", async (e) => {
          const id = e.target.dataset.id;
          await deleteDoc(doc(db, "products", id));
          displayProducts();
        });
      });

      // ุชูุนูู ุฃุฒุฑุงุฑ ุฅุถุงูุฉ ููุณูุฉ
      document.querySelectorAll(".cart-btn").forEach(button => {
        button.addEventListener("click", (e) => {
          const id = e.target.dataset.id;
          const card = e.target.closest(".product-card");
          const name = card.querySelector("h3").textContent;
          const price = parseFloat(card.querySelector("p").textContent.replace(/[^\d.]/g, ''));
          const image = card.querySelector("img").src;

          const cart = JSON.parse(localStorage.getItem("cart")) || [];

          // ุชุญูู ุฅุฐุง ุงูููุชุฌ ููุฌูุฏ ูุณุจููุง ูุฒูุงุฏุฉ ุงูุนุฏุฏ ุฃู ุฅุถุงูุชู ุฌุฏูุฏูุง
          const existingIndex = cart.findIndex(item => item.id === id);
          if (existingIndex !== -1) {
            cart[existingIndex].quantity += 1;
          } else {
            cart.push({ id, name, price, image, quantity: 1 });
          }

          localStorage.setItem("cart", JSON.stringify(cart));
          alert("ุชูุช ุฅุถุงูุฉ ุงูููุชุฌ ุฅูู ุงูุณูุฉ");
        });
      });
    }

    // ุงูุชุนุงูู ูุน ุฅุฑุณุงู ุงููููุฐุฌ
    document.getElementById("productForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("productName").value.trim();
      const price = parseFloat(document.getElementById("productPrice").value);
      const imageInput = document.getElementById("productImage");
      const file = imageInput.files[0];

      if (!name || isNaN(price) || !file) {
        alert("ูุฑุฌู ุชุนุจุฆุฉ ุฌููุน ุงูุญููู");
        return;
      }

      // ูุฑุงุกุฉ ุงูุตูุฑุฉ ูุชุญููููุง ุฅูู Base64
      const reader = new FileReader();
      reader.onload = async function (event) {
        const imageBase64 = event.target.result;
        await addProduct(name, price, imageBase64);
        alert("ุชูุช ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ!");
        document.getElementById("productForm").reset();
        displayProducts();
      };
      reader.readAsDataURL(file);
    });

    // ุนุฑุถ ุงูููุชุฌุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
    window.addEventListener("DOMContentLoaded", () => {
      displayProducts();
    });
  </script>
  <script type="module" src="script.js"></script>
   <script type="module" src="countdown.js"></script>
</body>
</html>
